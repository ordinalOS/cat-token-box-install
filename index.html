<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAT Token Box Setup Guide</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-json.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-tomorrow.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f4f4f4;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        h1, h2, h3 {
            color: #2c3e50;
        }
        a {
            color: #3498db;
        }
        pre[class*="language-"] {
            background: #1e1e1e;
            border-radius: 4px;
            padding: 1em;
            margin: .5em 0;
            overflow: auto;
        }
        code[class*="language-"] {
            color: #d4d4d4;
            text-shadow: none;
        }
        .note, .warning, .troubleshooting {
            border-radius: 4px;
            margin-bottom: 15px;
            padding: 4px 12px;
        }
        .note {
            background-color: #e7f3fe;
            border-left: 6px solid #2196F3;
        }
        .warning {
            background-color: #ffffcc;
            border-left: 6px solid #ffeb3b;
        }
        .troubleshooting {
            background-color: #ffebee;
            border-left: 6px solid #f44336;
        }
    </style>
</head>
<body>
    <h1>CAT Token Box Setup Guide</h1>
    
    <div class="warning">
        <p><strong>HIGHLY RECOMMENDED:</strong> To use the official documentation <a href="https://github.com/CATProtocol/cat-token-box" target="_blank">https://github.com/CATProtocol/cat-token-box</a></p>
        <p><strong>NOTE:</strong> I will be updating this guide. Follow me at <a href="https://x.com/ordinalos" target="_blank">@ordinalos</a> for updates.</p>
    </div>

    <h2>1. System Requirements and Prerequisites</h2>
    <h3>1.1 Operating System</h3>
    <p>This guide primarily focuses on a fresh Ubuntu installation. We recommend using the latest LTS version of Ubuntu, which you can download from the <a href="https://ubuntu.com/download/desktop" target="_blank">official Ubuntu website</a>.</p>

    <h3>1.2 VPS Option</h3>
    <p>If you prefer using a VPS, here are three recommended providers that offer easy Ubuntu setup:</p>
    <ul>
        <li><a href="https://www.digitalocean.com/" target="_blank">DigitalOcean</a></li>
        <li><a href="https://www.linode.com/" target="_blank">Linode</a></li>
        <li><a href="https://www.vultr.com/" target="_blank">Vultr</a></li>
    </ul>

    <h3>1.3 Basic System Setup</h3>
    <p>Update your system and install basic packages:</p>
    <pre><code class="language-bash">
sudo apt update
sudo apt upgrade -y
sudo apt install -y build-essential git curl
    </code></pre>

    <h3>1.4 Install Node.js and Yarn</h3>
    <pre><code class="language-bash">
# Install nvm (Node Version Manager)
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.0/install.sh | bash

# Download and install Node.js (you may need to restart the terminal)
nvm install 20

# Verify the Node.js version
node -v # should print `v20.17.0`

# Verify the npm version
npm -v # should print `10.8.2`

# Install Yarn
npm install -g yarn
    </code></pre>

    <h3>1.5 Install and Setup PostgreSQL</h3>
    <pre><code class="language-bash">
sudo apt install -y postgresql postgresql-contrib
sudo systemctl start postgresql
sudo systemctl enable postgresql
sudo -u postgres psql -c "CREATE DATABASE cat;"
sudo -u postgres psql -c "CREATE USER cat_user WITH PASSWORD 'your_password';"
sudo -u postgres psql -c "GRANT ALL PRIVILEGES ON DATABASE cat TO cat_user;"
    </code></pre>

    <div class="note">
        <p><strong>NOTE:</strong> Replace 'your_password' with a strong, unique password.</p>
    </div>

    <div class="troubleshooting">
        <h4>Troubleshooting Section 1:</h4>
        <ul>
            <li>To check if PostgreSQL is running: <code>sudo systemctl status postgresql</code></li>
            <li>To test PostgreSQL connection: <code>psql -h localhost -U cat_user -d cat</code></li>
        </ul>
    </div>

    <h2>2. CAT Token Box Setup</h2>
    <h3>2.1 Clone the Repository</h3>
    <pre><code class="language-bash">
git clone https://github.com/CATProtocol/cat-token-box.git
cd cat-token-box
    </code></pre>

    <h3>2.2 Install Dependencies and Build</h3>
    <pre><code class="language-bash">
yarn install && yarn build
    </code></pre>

    <div class="troubleshooting">
        <h4>Troubleshooting Section 2:</h4>
        <ul>
            <li>If build fails, ensure all prerequisites are installed: <code>node -v && yarn -v</code></li>
            <li>Check for any error messages in the build output and address them accordingly.</li>
        </ul>
    </div>

    <h2>3. Tracker Setup</h2>
    <p>For detailed instructions, refer to the <a href="https://github.com/CATProtocol/cat-token-box/blob/main/packages/tracker" target="_blank">official tracker documentation</a>.</p>

    <h3>3.1 Installation and Build</h3>
    <pre><code class="language-bash">
cd packages/tracker
yarn install
yarn build
    </code></pre>

    <h3>3.2 Configure Environment</h3>
    <pre><code class="language-bash">
cp .env.example .env
nano .env
    </code></pre>
    <p>Update the .env file with your configuration.</p>

    <h3>3.3 Set Up Docker</h3>
    <pre><code class="language-bash">
sudo chmod 777 docker/data
sudo chmod 777 docker/pgdata
docker compose up -d
    </code></pre>

    <h3>3.4 Run the Tracker Service</h3>
    <p>Option 1: Using Docker (Recommended)</p>
    <pre><code class="language-bash">
cd ../../
docker build -t tracker:latest .
docker run -d \
    --name tracker \
    --add-host="host.docker.internal:host-gateway" \
    -e DATABASE_HOST="host.docker.internal" \
    -e RPC_HOST="host.docker.internal" \
    -p 3000:3000 \
    tracker:latest
docker logs -f tracker
    </code></pre>

    <p>Option 2: Using Yarn</p>
    <pre><code class="language-bash">
# Development mode
yarn run start

# Production mode
yarn run start:prod
    </code></pre>

    <div class="note">
        <p><strong>NOTE:</strong> Ensure the tracker syncs to the latest block before running CLI commands. Check the sync progress at http://127.0.0.1:3000/api</p>
    </div>

    <div class="troubleshooting">
        <h4>Troubleshooting Section 3:</h4>
        <ul>
            <li>To check if the tracker is running: <code>docker ps | grep tracker</code></li>
            <li>To check tracker logs: <code>docker logs tracker</code></li>
            <li>To check the API endpoint: <code>curl http://localhost:3000/api</code></li>
            <li>To check sync progress, use the CLI to check wallet balance (see CLI commands below)</li>
        </ul>
    </div>

    <h2>4. CLI Setup and Usage</h2>
    <p>For detailed instructions, refer to the <a href="https://github.com/CATProtocol/cat-token-box/tree/main/packages/cli" target="_blank">official CLI documentation</a>.</p>

    <h3>4.1 Installation and Build</h3>
    <pre><code class="language-bash">
cd packages/cli
yarn install
yarn build
    </code></pre>

    <h3>4.2 Configuration</h3>
    <pre><code class="language-bash">
cp config.example.json config.json
nano config.json
    </code></pre>
    <p>Update config.json with your own configuration.</p>

    <h3>4.3 CLI Commands</h3>
    <pre><code class="language-bash">
# Create a wallet
yarn cli wallet create

# Show address
yarn cli wallet address

# Show token balances
yarn cli wallet balances

# Deploy token
yarn cli deploy --metadata=example.json
# or
yarn cli deploy --name=cat --symbol=CAT --decimals=2 --max=21000000 --premine=0 --limit=5

# Mint token
yarn cli mint -i [tokenId] [amount?]

# Send token
yarn cli send -i [tokenId] [receiver] [amount]
    </code></pre>

    <div class="note">
        <p><strong>NOTE:</strong> Replace [tokenId], [receiver], and [amount] with actual values when using these commands.</p>
    </div>

    <div class="troubleshooting">
        <h4>Troubleshooting Section 4:</h4>
        <ul>
            <li>If CLI commands fail, ensure the tracker is fully synced by checking the wallet balance.</li>
            <li>To check tracker sync progress: <code>yarn cli wallet balance</code></li>
            <li>If commands still fail, check tracker logs for any error messages: <code>docker logs tracker</code></li>
        </ul>
    </div>

    <h2>5. Final Notes</h2>
    <ul>
        <li>Always keep your system and packages up to date.</li>
        <li>Regularly backup your database and wallet.</li>
        <li>Monitor your system resources, especially when running a full node.</li>
        <li>For advanced configurations or issues, refer to the official documentation or seek community support.</li>
    </ul>

    <div class="warning">
        <p><strong>REMINDER:</strong> Always refer to the official documentation and README files in each package for the most up-to-date information and troubleshooting tips.</p>
    </div>

    <p>I will be updating this guide. Follow me at <a href="https://x.com/ordinalos" target="_blank">@ordinalos</a> for updates.</p>
</body>
</html>
